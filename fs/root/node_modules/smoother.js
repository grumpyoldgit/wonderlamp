
//
// A smoother acts as a ring buffer, taking input values and returning averages.
//

// default buffer size

function Smoother(n) {
  this.size = n;
  this.values = [];
  for (var i=0; i<this.size; i++) {
    this.values[i] = 0;
  }
  this.index = 0;
}

Smoother.prototype.pushInput = function(v) {
  if (this.index >= this.size) {
    this.index = 0;
  } else {
    this.index++;
  }
  this.values[this.index] = v;
}

Smoother.prototype.average = function() {
  var result = 0.0;

  for (var i=0; i<this.size; i++) { // add all the values
    result += this.values[i];
  }
  result /= this.size; // divide by the length

  return result;
}


module.exports = {
  createSmoother: function(size) {
    return new Smoother(size);
  }
}